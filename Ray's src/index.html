<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <title>SAFESTATE</title>
</head>
<body>
    <div class="container-fluid justify-content-center" style="text-align:center;">
    <h1 style="font-weight:bold;">SAFESTATE</h1>
    <h2 style="font-size:20px;line-height:10px;">
        <p>Review Home Listings & View Local Threats To Your Family</p>
        <input id="citysearch" placeholder="Enter City, State ex. Riverside, Ca ..... or Zipcode" style="width:500px;">&nbsp;&nbsp;<button class="btn-primary" id="searchbtn" style="padding:8px;">Search</button>
    </h2>
        <div id="googleMap" style="width:80%;height:430px;margin:0auto;display:inline-block;">
        </div>
<!----
        //Below is an example of calling the API for the citystate and/or Zip for match
      http://www.zillow.com/webservice/GetSearchResults.htm?zws-id=<ZWSID>&citystatezip="<pull search box info>"
        // The ZWSID = X1-ZWz17iadm8naiz_8mfo0
      -->
<script>
    function myMap() {
    var mapProp= {
    center:new google.maps.LatLng(37.82, -97.39),
    zoom:4,
    };
    var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
    }
</script>
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
</div>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh8slGTIfljtLw0cI2mwI622iNuUpRdWY&callback=myMap"></script>
</html>
<!-- jhensen's Code-->
<script> 


const express = require('express');
const request = require('request');

const app = express();

app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*');
  next();
});

app.get('/jokes/random', (req, res) => {
  request(
    { url: 'https://medium.com/@dtkatz/3-ways-to-fix-the-cors-error-and-how-access-control-allow-origin-works-d97d55946d9' },
    (error, response, body) => {
      if (error || response.statusCode !== 200) {
        return res.status(500).json({ type: 'error', message: err.message });
      }

      res.json(JSON.parse(body));
    }
  )
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => console.log(`listening on ${PORT}`));


/*
$.ajax({
  method: 'GET',
  url: 'https://api.crimeometer.com/v1/incidents/crowdsourced-raw-data?lat={lat}&lon={lon}&distance={distance}&datetime_ini={datetime_ini}&datetime_end={datetime_end}&page={page}',
  headers: {
    'Content-Type': 'application/json',
   'Access-Control-Allow-Origin': 'http://localhost:3000',
    'x-api-key': 'fjrTErJm274w1yQ0IR8rorUEqt4lSz388jXyPUM5'
  }}, function (error, response, body) {
  console.log('Status:', response.statusCode);
  console.log('Headers:', JSON.stringify(response.headers));
  console.log('Response:', body);

}); */

</script>